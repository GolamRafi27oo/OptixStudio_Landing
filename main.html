<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
.nav-link.active {
    color: red; /* Change the color or style as needed */
    font-weight: bold;
}

/* Optional: styling for sections */
.section {
    padding: 20px;
    margin: 20px 0;
}
    </style>
</head>

<body>
    <nav style="position: fixed; top-0">
        <ul>
            <li><a href="#section1" class="nav-link">Section 1</a></li>
            <li><a href="#section2" class="nav-link">Section 2</a></li>
            <li><a href="#section3" class="nav-link">Section 3</a></li>
        </ul>
    </nav>
    
    <div id="section1" class="section" style="height: 10vh; background-color: lightblue;">
        <h2>Section 1</h2>
    </div>
    
    <div id="section2" class="section" style="height: 100vh; background-color: lightgreen;">
        <h2>Section 2</h2>
    </div>
    
    <div id="section3" class="section" style="height: 100vh; background-color: lightcoral;">
        <h2>Section 3</h2>
    </div>

<script>
// Function to handle setting the active link based on the current section in view
function setActiveNavLink() {
    const links = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.section');

    let currentSection = null;

    // Loop through each section to find the one that's currently in view
    sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        if (rect.top <= 0 && rect.bottom >= 0) { // The section is in the viewport
            currentSection = section.id;
        }
    });

    // Remove 'active' class from all links
    links.forEach(link => link.classList.remove('active'));

    // Add the 'active' class to the link corresponding to the current section
    if (currentSection) {
        const activeLink = document.querySelector(`a[href="#${currentSection}"]`);
        if (activeLink) {
            activeLink.classList.add('active');
        }
    }
}

// Function to handle hash change and set the active nav link based on the URL hash
function setActiveLinkFromHash() {
    const hash = window.location.hash.substring(1); // Get the current hash without the '#'
    const links = document.querySelectorAll('.nav-link');

    // Remove the 'active' class from all links
    links.forEach(link => link.classList.remove('active'));

    // If there's a hash and it matches a section, add the 'active' class to the corresponding link
    if (hash) {
        const activeLink = document.querySelector(`a[href="#${hash}"]`);
        if (activeLink) {
            activeLink.classList.add('active');
        }
    }
}

// Run the functions on page load
window.addEventListener('load', () => {
    setActiveNavLink(); // Set the active link based on the current section
    setActiveLinkFromHash(); // Set the active link based on the hash in the URL
});

// Run the function when the user scrolls
window.addEventListener('scroll', setActiveNavLink);

// Run the function when the hash changes (e.g., when the user clicks a nav link)
window.addEventListener('hashchange', setActiveLinkFromHash);

</script>
</body>

</html>